{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"51344129-a8075834a2d0391c119eb3239\";\n\nexport async function getImagesByQuery(query, page, perPage) {\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page,\n                per_page: perPage,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst list = document.querySelector(\".gallery\"); \nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n  \nexport function createGallery(images) {\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n        </a>\n        <div class=\"info\">\n        <p><b>Likes:</b> ${image.likes}</p>\n        <p><b>Views:</b> ${image.views}</p>\n        <p><b>Comments:</b> ${image.comments}</p>\n        <p><b>Downloads:</b> ${image.downloads}</p>\n        </div>\n        </li>`)\n     \n        .join('');\n    \n    list.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    list.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"is-hidden\");\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add(\"is-hidden\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst list = document.querySelector(\".gallery\"); \nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet page = 1;\nlet perPage = 15;\nlet currentQuery = \"\";\n\nform.addEventListener(\"submit\", handleSubmit);\nloadMoreBtn.addEventListener(\"click\", handleLoadMore);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    \n    const searchText = event.currentTarget.elements[\"search-text\"].value;\n    const query = searchText.trim();\n\n    if (!query) return;\n\n    currentQuery = query;\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, page, perPage);\n\n            if (data.hits.length === 0) {\n                iziToast.info({\n                    title: \"Info\",\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\",\n                });\n                return;\n            }\n    \n        createGallery(data.hits);\n        if (data.totalHits > perPage) {\n        showLoadMoreButton();\n    }\n        } catch (error) {\n            console.error(\"Помилка при отриманні зображення:\", error);\n            iziToast.info({\n                title: \"Error\",\n                message: \"Something went wrong. Please try again later.\",\n                position: \"topRight\",\n            });\n        } finally {\n        hideLoader();\n    };\n};\n\nasync function handleLoadMore() {\n    page += 1;\n    showLoader();\n    try {\n        const data = await getImagesByQuery(currentQuery, page, perPage);\n        createGallery(data.hits);\n    const { height: cardHeight } = list.firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n})\n        const totalLoaded = page * perPage;\n        if (totalLoaded >= data.totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: \"Info\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n    } catch (error) {\n        console.log(\"Помилка при завантаженні наступної сторінки:\", error);\n        iziToast.error({\n            title: \"Error\",\n            message: \"Could not load more images.\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader()\n    }\n}"],"names":["API_KEY","getImagesByQuery","query","page","perPage","axios","error","list","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","currentQuery","handleSubmit","handleLoadMore","event","data","iziToast","cardHeight"],"mappings":"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"}